<div data-ng-if="ipBlock.version === 'IPV6'" data-uib-dropdown>
    <button
        type="button"
        class="btn btn-link dropdown-toggle"
        title="{{:: 'common_actions' | translate }}"
        data-uib-dropdown-toggle
    >
        <span
            class="ovh-font ovh-font-dots align-top"
            aria-label="{{:: 'common_actions' | translate }}"
            aria-hidden="true"
        >
        </span>
    </button>

    <!-- IPv6 -->
    <ul class="dropdown-menu-right" data-uib-dropdown-menu>
        <li data-ng-if="ipBlock.isUniq">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToBlockDescriptionEdit({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-ng-bind="ipBlock.description && ('ip_description_edit_title' | translate) || ('ip_description_new_title' | translate)"
            ></button>
        </li>

        <li>
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToReverseUpdate({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName, 'serviceType': ipBlock.service.category })"
                data-translate="ip_table_manage_reverse"
            ></button>
        </li>
    </ul>
</div>

<div data-ng-if="ipBlock.version === 'IPV4'" data-uib-dropdown>
    <button
        type="button"
        class="btn btn-link dropdown-toggle"
        title="{{:: 'common_actions' | translate }}"
        data-uib-dropdown-toggle
    >
        <span
            class="ovh-font ovh-font-dots align-top"
            aria-label="{{:: 'common_actions' | translate }}"
            aria-hidden="true"
        >
        </span>
    </button>

    <!-- IPv4 -->
    <ul class="dropdown-menu-right" data-uib-dropdown-menu>
        <!-- DESCRIPTION -->
        <li data-ng-if="ipBlock.isUniq">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToBlockDescriptionEdit({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-ng-bind="ipBlock.description && ('ip_description_edit_title' | translate) || ('ip_description_new_title' | translate)"
            ></button>
        </li>

        <!-- REVERSE -->
        <li>
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToReverseUpdate({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName, 'serviceType': ipBlock.service.category })"
                data-translate="ip_table_manage_reverse"
            ></button>
        </li>

        <li
            class="divider"
            data-ng-if="ipBlock.service.category !== 'CLOUD' || ipBlock.type === 'FAILOVER'"
            role="separator"
        ></li>

        <!-- VIRTUAL MAC -->
        <li data-ng-if="ipBlock.type === 'FAILOVER'">
            <button
                type="button"
                class="btn btn-link"
                data-ng-if="ipBlock.service.category === 'DEDICATED' && ipBlock.service.virtualmac.status === 'OK' && !ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]"
                data-translate="ip_table_manage_add_virtualmac"
                data-ng-click="$ctrl.goToVirtualMacAdd({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName, 'serviceType': ipBlock.service.category })"
            ></button>
            <button
                type="button"
                class="btn btn-link"
                data-ng-if="ipBlock.service.category !== 'DEDICATED' || ipBlock.service.virtualmac.status !== 'OK' || ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]"
                data-translate="ip_table_manage_add_virtualmac"
                data-oui-tooltip-placement="left"
                data-oui-tooltip="{{:: getVirtualMacMessage(ipBlock) }}"
                disabled
            ></button>
        </li>
        <li
            data-ng-if="ipBlock.service.category === 'DEDICATED' && ipBlock.type === 'FAILOVER' && ipBlock.service.virtualmac.status === 'OK' && ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToVirtualMac({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName, 'serviceType': ipBlock.service.category })"
                data-translate="ip_table_manage_view_virtualmac"
            ></button>
        </li>
        <li
            data-ng-if="ipBlock.service.category === 'DEDICATED' && ipBlock.type === 'FAILOVER' && ipBlock.service.virtualmac.status === 'OK' && ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToVirtualMacDelete({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName, 'serviceType': ipBlock.service.category })"
                data-translate="ip_table_manage_del_virtualmac"
            ></button>
        </li>

        <li
            class="divider"
            data-ng-if="ip.mitigation && ipBlock.service.category !== 'HOUSING'"
            role="separator"
        ></li>

        <!-- MITIGATION::SWITCH DEFAULT > PERMANENT -->
        <li
            data-ng-if="(!ip.mitigation || ip.mitigation === 'DEFAULT') && ipBlock.service.category !== 'HOUSING'"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToMitigationUpdate({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_mitigation_DEFAULT_to_PERMANENT"
            ></button>
        </li>
        <!-- MITIGATION::SWITCH PERMANENT > DEFAULT -->
        <li
            data-ng-if="ip.mitigation === 'PERMANENT' && ipBlock.service.category !== 'HOUSING'"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToMitigationUpdate({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_mitigation_PERMANENT_to_AUTO"
            ></button>
        </li>

        <!-- MITIGATION::STATS -->
        <li
            data-ng-if="(ip.mitigation === 'PERMANENT' || ip.mitigation === 'FORCED')"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToMitigationStatistics({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_mitigation_stats"
            ></button>
        </li>

        <!-- TODO  -->
        <li
            class="divider"
            role="separator"
            data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'CLOUD'"
        ></li>

        <!-- GAME MITIGATION -->
        <li>
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToFirewallGame({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_game_mitigation"
                data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'CLOUD'"
            ></button>
        </li>

        <li
            class="divider"
            data-ng-if="ip.mitigation !== 'CREATION_PENDING' && ip.mitigation !== 'REMOVAL_PENDING' && ipBlock.service.category !== 'HOUSING'"
            role="separator"
        ></li>

        <!-- FIREWALL::NEW -->
        <li
            data-ng-if="ip.mitigation !== 'FORCED' && ip.firewall === 'NOT_CONFIGURED' && ipBlock.service.category !== 'HOUSING'"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToFirewallToggle({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_firewall_configure"
            ></button>
        </li>
        <!-- FIREWALL::ENABLE -->
        <li
            data-ng-if="ip.mitigation !== 'FORCED' && ip.firewall === 'DEACTIVATED'"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToFirewallToggle({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_firewall_enable"
            ></button>
        </li>
        <!-- FIREWALL::DISABLE -->
        <li
            data-ng-if="(!ip.mitigation || ip.mitigation === 'DEFAULT') && ip.firewall === 'ACTIVATED'"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToFirewallToggle({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_firewall_disable"
            ></button>
        </li>
        <li data-ng-if="ip.mitigation && ip.mitigation !== 'DEFAULT'">
            <button
                type="button"
                class="btn btn-link"
                data-translate="ip_table_manage_firewall_disable"
                data-oui-tooltip-placement="left"
                data-oui-tooltip="{{::Â 'ip_table_manage_firewall_disable_tooltip' | translate }}"
                disabled
            ></button>
        </li>
        <!-- FIREWALL::CONFIGURE -->
        <li data-ng-if="ip.firewall && ip.firewall !== 'NOT_CONFIGURED'">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToFirewall({ 'ip': ip.ip, 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_firewall_rules"
            ></button>
        </li>

        <li
            data-ng-if="ip.spam === 'BLOCKED_FOR_SPAM' || ip.arp === 'BLOCKED'"
            class="divider"
            role="separator"
        ></li>

        <!-- SPAM::UNBLOCK -->
        <li data-ng-if="ip.spam === 'BLOCKED_FOR_SPAM'">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToAntispam({ 'ip': ipBlock.ipBlock, 'ipSpamming': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_antispam_unblock"
            ></button>
        </li>

        <!-- ANTIHACK::UNBLOCK -->
        <li data-ng-if="ip.antihack === 'BLOCKED'">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToAntihack({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_view_antihack"
            ></button>
        </li>

        <!-- ARP::UNBLOCK -->
        <li data-ng-if="ip.arp === 'BLOCKED'">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToArp({ 'ipBlock': ipBlock.ipBlock, 'ip': ip.ip, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_view_arp"
            ></button>
        </li>

        <li
            class="divider"
            data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq"
            role="separator"
        ></li>

        <!-- ORGANISATION -->
        <li
            data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq && ipBlock.organizationId"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToOrganisationView({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_view_iporganisation_details"
            ></button>
        </li>

        <li
            data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq && ipBlock.organizationId"
        >
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToOrganisationChange({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_view_iporganisation_change"
            ></button>
        </li>

        <!-- IPMOVE -->
        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToBlockMove({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-translate="ip_table_manage_move_ipblock"
            ></button>
        </li>

        <!-- IP DELETE -->
        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq">
            <button
                type="button"
                class="btn btn-link"
                data-ng-click="$ctrl.goToBlockDelete({ 'ipBlock': ipBlock.ipBlock, 'serviceName': filters.service.serviceName })"
                data-ng-if="ipBlock.canBeTerminated"
                data-translate="ip_table_manage_delete_ipblock"
            ></button>
            <button
                type="button"
                class="btn btn-link"
                data-ng-if="!ipBlock.canBeTerminated"
                data-translate="ip_table_manage_delete_ipblock"
                data-oui-tooltip="{{:: 'ip_failover_impossible_delete' | translate }}"
                data-oui-tooltip-placement="left"
                disabled
            ></button>
        </li>
    </ul>
</div>
